# Инструкция по развертыванию на мини-сервере

## Требования
- Python 3.8+
- Доступ к серверу (локальная сеть или интернет)
- 3 коллеги для тестирования

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Убедитесь, что файл `.env` содержит API ключ OpenAI:
```
AI_API_KEY=ваш_ключ
AI_MODEL=gpt-4o-mini
```

## Запуск на мини-сервере

### Вариант 1: Локальная сеть (для коллег в офисе)

1. Узнайте IP адрес вашего компьютера:
```bash
# macOS/Linux
ifconfig | grep "inet " | grep -v 127.0.0.1

# Windows
ipconfig
```

2. Запустите приложение с доступом из сети:
```bash
python3 run.py
```

Приложение будет доступно по адресу: `http://ВАШ_IP:5003`

3. Коллеги могут подключиться, используя этот IP адрес.

### Вариант 2: Через ngrok (для удаленного доступа)

1. Установите ngrok: https://ngrok.com/

2. Запустите приложение:
```bash
python3 run.py
```

3. В другом терминале запустите ngrok:
```bash
ngrok http 5003
```

4. Скопируйте URL из ngrok (например: `https://abc123.ngrok.io`) и поделитесь с коллегами.

## Настройка для 3 коллег

1. Создайте тестовые аккаунты или попросите коллег зарегистрироваться
2. Каждый коллега должен:
   - Открыть приложение в браузере
   - Зарегистрироваться или войти
   - Начать диалог с AI-психологом

## Проверка работы

1. Убедитесь, что приложение запущено и доступно
2. Проверьте, что база данных создается (`psychologist.db`)
3. Проверьте, что файлы концепций сохраняются (`concept_files/`)
4. Проверьте работу личного кабинета и MLM системы

## Безопасность

⚠️ **Важно для продакшена:**
- Измените `SECRET_KEY` в `app.py`
- Используйте HTTPS (через nginx или другой прокси)
- Ограничьте доступ по IP если нужно
- Регулярно делайте бэкапы базы данных

## Проблемы и решения

**Проблема:** Коллеги не могут подключиться
- Проверьте firewall настройки
- Убедитесь, что порт 5003 открыт
- Проверьте, что IP адрес правильный

**Проблема:** Ошибки при запуске
- Проверьте, что все зависимости установлены
- Проверьте, что `.env` файл существует и содержит API ключ
- Проверьте логи: `tail -f /tmp/psychologist_app.log`

## Структура проекта

```
psychologist_app/
├── app.py                 # Основное приложение Flask
├── psychologist_ai.py     # Логика AI психолога
├── mlm_system.py          # MLM система
├── run.py                 # Скрипт запуска
├── templates/             # HTML шаблоны
├── static/                # CSS, JS файлы
├── psychologist.db        # База данных (создается автоматически)
└── concept_files/         # Сохраненные файлы концепций
```





