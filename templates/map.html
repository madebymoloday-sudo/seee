<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Нейрокарта - SEEE</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="map-container">
        <!-- Левая часть: Таблица карты -->
        <div class="map-table-section">
            <div class="map-header">
                <h1>⚡ Нейрокарта</h1>
                <div class="header-right">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="SEEE" class="header-logo">
                    <button class="btn-back" onclick="window.location.href='/'">← Назад к сессиям</button>
                </div>
            </div>
            
            <div class="map-table-wrapper">
                <div class="map-tabs">
                    <button class="map-tab-btn active" data-tab="events">События</button>
                    <button class="map-tab-btn" data-tab="before-after">До и После</button>
                </div>
                
                <!-- Таблица событий -->
                <div class="map-tab-content active" id="tab-events">
                    <table class="map-table">
                        <thead>
                            <tr>
                                <th>№</th>
                                <th>Событие</th>
                                <th>Эмоции</th>
                                <th>Идеи</th>
                                <th>✓</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="mapTableBody">
                            <!-- Записи будут добавлены через JS -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Таблица До и После -->
                <div class="map-tab-content" id="tab-before-after">
                    <table class="map-table">
                        <thead>
                            <tr>
                                <th>До</th>
                                <th>После</th>
                                <th>Круг</th>
                                <th>Статус</th>
                            </tr>
                        </thead>
                        <tbody id="beforeAfterTableBody">
                            <!-- Записи будут добавлены через JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Окно ввода внизу -->
        <div class="input-container">
            <form id="mapMessageForm">
                <button type="button" class="btn-mobile-menu-toggle mobile-only" id="mapMobileMenuToggle">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 15l-6-6-6 6"/>
                    </svg>
                </button>
                <textarea 
                    id="mapMessageInput" 
                    placeholder="Напишите ваше сообщение..." 
                    rows="1"
                    autocomplete="off"></textarea>
                <button type="button" class="btn-send desktop-only" id="mapSendBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button type="button" class="btn-send-mobile mobile-only" id="mapSendBtnMobile" style="display: none;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </form>
            
            <!-- Мобильное меню для карты -->
            <div class="mobile-menu" id="mapMobileMenu">
                <div class="mobile-menu-overlay" id="mapMobileMenuOverlay"></div>
                <div class="mobile-menu-content">
                    <button class="mobile-menu-item" onclick="window.location.href='/'">
                        ← Назад к сессиям
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/map.js') }}"></script>
</body>
</html>

