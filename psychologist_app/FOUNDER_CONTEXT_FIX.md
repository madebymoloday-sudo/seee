# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è

## –ü—Ä–æ–±–ª–µ–º–∞

–°–∏—Å—Ç–µ–º–∞ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, —á—Ç–æ:
1. –û—Å–Ω–æ–≤–∞—Ç–µ–ª—å - —ç—Ç–æ –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ
2. –û–ø–∏—Å–∞–Ω–Ω—ã–µ —Ü–µ–ª–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—é, –∞ –Ω–µ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ `app_template.py`:

### 1. –§—É–Ω–∫—Ü–∏—è `extract_founder_context()`

–†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö:
- "—ç—Ç–æ –Ω–µ —è, –∞ –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ –∫–∞–∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å"
- "–æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ"
- "–í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ, –∫–∞–∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å"

### 2. –§—É–Ω–∫—Ü–∏—è `process_message_with_context()`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–º—è –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
- –°–≤—è–∑—ã–≤–∞–µ—Ç —Ü–µ–ª–∏ —Å –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–º, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ
- –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª–µ `founder` –≤ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–º–µ—Ç–∫—É –∫ —Ü–µ–ª–∏, —á—Ç–æ –æ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—é

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handle_message()`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é.

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≤–∞—à app.py

### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `app_template.py`:
- `extract_founder_context()`
- `process_message_with_context()`

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π

–í –≤–∞—à–µ–º `@socketio.on('message')` –¥–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ:

```python
@socketio.on('message')
def handle_message(data):
    session_id = data.get('session_id')
    message = data.get('message', '')
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ü–µ–ø—Ü–∏—é
    session_data = get_session(session_id)
    current_concept = session_data.get('current_concept') or get_current_concept(session_id)
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è
    context_result = process_message_with_context(message, session_id, current_concept)
    
    if context_result and context_result.get('concept_updated'):
        save_session(session_id, session_data)
        emit('response', {
            'message': context_result['message'],
            'concept_updated': True,
            'founder': context_result.get('founder'),
            'show_navigation': True
        })
        return
    
    # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
    # ... –≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
```

### –®–∞–≥ 3: –£–ª—É—á—à–∏—Ç–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:

```python
# –î–æ–±–∞–≤—å—Ç–µ –≤ extract_founder_context() –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
founder_patterns = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã ...
    r'([–ê-–Ø–Å][–∞-—è—ë]+(?:\s+[–ê-–Ø–Å][–∞-—è—ë]+)?).*?–æ—Å–Ω–æ–≤–∞—Ç–µ–ª',
    r'–æ—Å–Ω–æ–≤–∞—Ç–µ–ª[—å–∏].*?([–ê-–Ø–Å][–∞-—è—ë]+(?:\s+[–ê-–Ø–Å][–∞-—è—ë]+)?)',
    r'—ç—Ç–æ\s+([–ê-–Ø–Å][–∞-—è—ë]+(?:\s+[–ê-–Ø–Å][–∞-—è—ë]+)?).*?—Ö–æ—Ç–µ–ª',
]
```

---

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è
**–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
> "–≠—Ç–æ –Ω–µ —è —Ö–æ—Ç–µ–ª –±—ã, –∞ –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ, –∫–∞–∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–º—è: "–í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ"
- –û–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª–µ `founder`: "–í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ"
- –ï—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–µ - —Ü–µ–ª—å, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–º–µ—Ç–∫–∞: "—Ü–µ–ª–∏ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ"
- –û—Ç–ø—Ä–∞–≤–ª–µ–Ω –æ—Ç–≤–µ—Ç: "–ü–æ–Ω—è–ª! –¶–µ–ª–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—é –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ. –û–±–Ω–æ–≤–∏–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é."

### –ü—Ä–∏–º–µ—Ä 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
**–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
> "–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å - —ç—Ç–æ –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–º—è: "–í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ"
- –û–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª–µ `founder`
- –û—Ç–ø—Ä–∞–≤–ª–µ–Ω –æ—Ç–≤–µ—Ç: "–ò—Å–ø—Ä–∞–≤–∏–ª! –û—Å–Ω–æ–≤–∞—Ç–µ–ª—å: –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ. –¶–µ–ª–∏ —Ç–µ–ø–µ—Ä—å —Å–≤—è–∑–∞–Ω—ã —Å –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–º."

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤—è–∑–∏ —Ü–µ–ª–µ–π —Å –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–º

–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ü–µ–ª–∏, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å:

```python
if current_field == 'purpose' and current_concept.get('founder'):
    purpose_text = user_response
    founder_name = current_concept['founder']
    current_concept['purpose'] = f"{purpose_text} (—Ü–µ–ª–∏ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è {founder_name})"
```

### 2. –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤—è–∑–∏

–ù–∞ frontend –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä:

```javascript
// –í —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
if (concept.founder) {
    displayText += `\nüë§ –û—Å–Ω–æ–≤–∞—Ç–µ–ª—å: ${concept.founder}`;
    if (concept.purpose && concept.purpose.includes('—Ü–µ–ª–∏ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è')) {
        displayText += '\nüìå –¶–µ–ª–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—é';
    }
}
```

### 3. –£—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ü–µ–ª–∏, –Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è:

```python
if '—Ü–µ–ª—å' in message.lower() and not current_concept.get('founder'):
    question = "–≠—Ç–∏ —Ü–µ–ª–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –≤–∞–º –∏–ª–∏ –∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—é –∏–¥–µ–∏?"
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–æ–ø—Ä–æ—Å –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞
    current_concept['pending_clarification'] = 'founder_goals'
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

1. ‚úÖ "–≠—Ç–æ –Ω–µ —è, –∞ –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ –∫–∞–∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å"
2. ‚úÖ "–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å - –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ"
3. ‚úÖ "–í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ, –∫–∞–∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å, —Ö–æ—Ç–µ–ª..."
4. ‚úÖ "–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å —ç—Ç–æ –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ"
5. ‚úÖ "–ò—Å–ø—Ä–∞–≤—å: –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å –í–∞—Å—è –Ø–∫–∏–º–µ–Ω–∫–æ"

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü–æ–ª–µ `founder` –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- –¶–µ–ª–∏ —Å–≤—è–∑–∞–Ω—ã —Å –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–º (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ

---

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è** –º–æ–≥—É—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–º–µ–Ω
2. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** –≤–∞–∂–µ–Ω - —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–æ–≥–¥–∞ —Ä–µ—á—å –∏–¥–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–Ω–∏–º–∞–Ω–∏—è

---

## –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –°–≤—è–∑—ã–≤–∞—Ç—å —Ü–µ–ª–∏ —Å –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–º
- ‚úÖ –û–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

