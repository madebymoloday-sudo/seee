# Обнаружение суицидальных мыслей

## Описание

Система автоматически обнаруживает суицидальные мысли в сообщениях пользователей и направляет их к психиатру с объяснением серьезности ситуации.

## Как это работает

### 1. Обнаружение

Функция `detect_suicidal_thoughts(message)` проверяет сообщение пользователя на наличие ключевых фраз, указывающих на суицидальные мысли:

- "я хочу умереть"
- "мне хочется умереть"
- "хочу покончить с собой"
- "покончить самоубийством"
- "суицид"
- "не хочу жить"
- "лучше умереть"
- "хочу уйти из жизни"
- "не вижу смысла жить"
- И другие подобные фразы

### 2. Ответ пользователю

Когда обнаружены суицидальные мысли, система:

1. **Немедленно прекращает работу с SEEE** - объясняет, что это серьезная ситуация
2. **Объясняет природу проблемы:**
   - Суицидальные мысли = 15-20 накопившихся негативных идей + химическая реакция организма
   - Организм находится в критическом состоянии
3. **Направляет к психиатру:**
   - Объясняет необходимость медикаментозного лечения
   - Подчеркивает, что медикаменты нужны для стабилизации организма
   - Уточняет, что после стабилизации можно вернуться к работе с идеями в SEEE
4. **Предоставляет контакты для срочной помощи:**
   - Телефон доверия: 8-800-2000-122
   - Служба экстренной помощи: 112
   - Рекомендация обратиться к психиатру

## Технические детали

### Функции

**`detect_suicidal_thoughts(message)`**
- Проверяет сообщение на наличие суицидальных фраз
- Возвращает `True` если обнаружены, `False` если нет

**`get_suicidal_response()`**
- Возвращает структурированный ответ с:
  - `message`: текст ответа
  - `is_critical`: `True` (для стилизации)
  - `requires_psychiatrist`: `True`
  - `show_navigation`: `False` (скрывает навигацию)

### Интеграция

Проверка выполняется в начале обработки каждого сообщения в `@socketio.on('message')`:

```python
@socketio.on('message')
def handle_message(data):
    message = data.get('message', '')
    
    # КРИТИЧЕСКАЯ ПРОВЕРКА: Обнаружение суицидальных мыслей
    if detect_suicidal_thoughts(message):
        suicidal_response = get_suicidal_response()
        emit('response', suicidal_response)
        return  # Прекращаем дальнейшую обработку
    
    # ... остальная логика обработки сообщений
```

### Стилизация

Критические сообщения имеют специальные стили:
- Красный градиентный фон
- Белый текст
- Пульсирующая анимация
- Выделение важных элементов

CSS классы: `.critical-message` или `.is-critical`

## Философия подхода

1. **Разделение ответственности:**
   - Психиатр → медикаментозное лечение (стабилизация организма)
   - SEEE → работа с идеями (долгосрочная проработка)

2. **Объяснение природы проблемы:**
   - Не просто "плохие мысли"
   - Это результат накопления идей + химическая реакция
   - Требует медицинского вмешательства

3. **Надежда и путь вперед:**
   - После стабилизации можно вернуться к работе с идеями
   - Медикаменты + работа с идеями = комплексный подход

## Важно

⚠️ **Система не заменяет профессиональную помощь!**
- Это инструмент для направления к специалистам
- Не диагностирует и не лечит
- Всегда направляет к психиатру при обнаружении суицидальных мыслей

## Обновление списка фраз

Если нужно добавить новые фразы для обнаружения, обновите список в функции `detect_suicidal_thoughts()`:

```python
suicidal_phrases = [
    'я хочу умереть',
    'мне хочется умереть',
    # ... добавьте новые фразы здесь
]
```

